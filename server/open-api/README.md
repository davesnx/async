# open-api folder

This folder contains all the clients that we support, generated by [open-api-generator](https://github.com/openapitools/openapi-generator-cli) based on their Open API Spec.

In the `spec/` folder we will store all the open api specs for each third party service as yaml files, while `clients/` will be the generated code by openapi-generator-cli.

We manually will generate those clients and keep them in git, allowing us to have control over the source for each.

### Generate a client

1. Install JDK
2. Install openapi-generator-cli (from npm or homebrew)
3. Run `openapi-generator-cli generate -i open-api-spec.yaml -g ocaml -o clients/service --enable-post-process-file`, as an example: `openapi-generator-cli generate -i github.yaml -g ocaml -o clients/github --enable-post-process-file`. Options and additionalProperties may vary from each client.
4. Change a bit the generated output
  - Move src/* into the service folder
  - Remove dune/dune-projects
  - Remove .opam